# Session: Symposium 2.0 Architecture Documentation

## Context

Working with Niko on documenting the new Symposium 2.0 architecture, which is being rebuilt entirely on top of the SACP (Symposium's ACP extensions) proxy framework. The SACP crates (sacp, sacp-proxy, sacp-conductor) are published at version 1.0-alpha.2 and we're "putting them through their paces" by building real Symposium components.

## Architectural Understanding

**Core Insight:** Symposium appears as a single ACP proxy externally, but internally uses a SACP conductor (in proxy mode) to orchestrate a dynamic chain of component proxies.

**Capability-Driven Assembly:**
1. Symposium receives initialization from upstream (editor) with capabilities
2. Sends initialization downstream to agent, adding Symposium's capabilities
3. Examines both upstream and downstream capabilities
4. Dynamically spawns proxy chain based on detected gaps and opportunities

**Component/Adapter Pattern (for some features):**
- **Components** - provide functionality to agents (e.g., MCP tools), may rely on primitive capabilities from upstream
- **Adapters** - shim for missing primitive capabilities (e.g., spawn rust-analyzer if editor lacks IDE ops)
- Components always included when relevant; adapters conditionally included only when needed

**Example:** IDE Operations
- If editor has `ide_operations` capability → spawn just IDE Ops Component
- If editor lacks it → spawn IDE Ops Adapter (provides capability) + IDE Ops Component

**Capability Convention:**
Capabilities stored in `_meta.symposium` using the `MetaCapabilityExt` trait from sacp crate:
```rust
struct IdeOperations;
impl MetaCapability for IdeOperations {
    fn key(&self) -> &'static str { "ide_operations" }
}
```

## Work Completed

### Documentation Updates

1. **md/design/implementation-overview.md** - Rewrote from scratch to explain:
   - External vs internal view (single proxy vs conductor + components)
   - Component/adapter pattern (some features, not all)
   - Capability-driven assembly approach
   - IDE Operations example showing conditional adapter inclusion
   - Kept it high-level, forward-referenced initialization-sequence.md for details

2. **md/SUMMARY.md** - Added style guidelines comment:
   - No promotional language ("rich", "powerful", "easy")
   - No "Benefits" sections
   - No duplicate table of contents
   - Factual technical writing, not persuasive

### Key Learnings

- **Meta structure matters** - Niko wanted to discuss the overall pattern before diving into specific component implementations
- **Style preferences** - Technical, factual documentation without promotional language
- **Not all features need adapters** - Some Symposium features don't depend on upstream capabilities, so they're just components
- **SACP docs exist** - Can link to https://symposium-dev.github.io/symposium-acp/ for conductor/proxy details

## Next Steps

Potential documentation tasks identified:
1. Create initialization-sequence.md chapter (detailed capability negotiation protocol)
2. Update components.md to align with new understanding  
3. Review ide_operations.md for consistency
4. Consider capability reference documentation

No code has been written yet - we're establishing the architectural documentation foundation first.

## Collaboration Notes

Good collaborative rhythm - Niko is providing the architectural vision and correcting my understanding when I misinterpret. I'm asking clarifying questions about the meta structure rather than jumping to implementation. The "let's talk about the meta structure first" signal was important to respect.